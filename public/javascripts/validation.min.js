v=function(r){var e={};return e.Schema=r.define({init:function(r){var e=this;e.validators=[],r&&Object.keys(r).forEach(function(a){Object.keys(r[a]).forEach(function(i){var n=r[a][i];e.addValidator(a,i,n)})})},properties:{addValidator:function(r,a,i){var n=this,t=e.Schema.resolveValidator(a);if(t){var o=new t(i);o.property=r,n.validators.push(o)}else console.error("[v.js] unknown schema:",a,i)},validate:function(e,a){function i(){s--;var r=0>=s;r&&a(d.length&&d||null)}var n=r.validators.Validator.isEmpty,t=this,o=t.validators,s=o.length,d=[];o.forEach(function(r){var a=r.property,t=e[a],o=n(t)&&r.skipIfEmpty;return o?(i(),void 0):(r.validate(t,function(r){r&&(r.property=a,d.push(r)),i()}),void 0)})},clone:function(){var r=this,a=new e.Schema;return a.validators=r.validators,a}}}),e.Schema.resolveValidator=function(e){var a=e.substr(0,1).toUpperCase()+e.substr(1)+"Validator",i=r.validators[a];return i?i:"function"==typeof value?r.validators.ConformValidator:null},e.Schema.Err=function(e){var a=this;r.copy(e,a)},e.disableAllValidations=function(){console.warn("all clientside validation is disabled"),e.Schema.prototype.validate=function(r,e){e(null)}},e}(tek),v.me=function(r){var e=r.Schema;return{update:new e({_id:{required:!0},username:{minLength:2},email:{format:"email"}}),password_change:new e({_id:{required:!0},password:{required:!0},password_confirm:{required:!0}})}}(v),v.sign=function(r){var e=r.Schema;return{signin:new e({username_or_email:{required:!0},password:{required:!0}}),signup:new e({username:{required:!0,minLength:2},password:{required:!0,minLength:2},captcha_text:{required:!0}})}}(v);